# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 401 - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω–µ–µ –≤—Å–µ –æ—à–∏–±–∫–∏ 401 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ - –∫–∞–∫ –æ—à–∏–±–∫–∏ —Ç–æ–∫–µ–Ω–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–º—É logout –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞ –¥–∞–∂–µ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–π –æ—à–∏–±–∫–µ –≤—Ö–æ–¥–∞.

## –†–µ—à–µ–Ω–∏–µ
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ 401 –ø–æ –∫–æ–¥–∞–º (error.code):

### üîê –û—à–∏–±–∫–∏ —Ç–æ–∫–µ–Ω–∞ (–¥–µ–ª–∞—é—Ç logout –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`):
- `TOKEN_EXPIRED` - —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫
- `INVALID_TOKEN` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω
- `NO_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- `INVALID_TOKEN_FORMAT` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞

### üîë –û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–ù–ï –¥–µ–ª–∞—é—Ç logout):
- `INVALID_CREDENTIALS` - –Ω–µ–≤–µ—Ä–Ω—ã–π email/–ø–∞—Ä–æ–ª—å –ø—Ä–∏ –≤—Ö–æ–¥–µ
- `USER_ALREADY_EXISTS` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å

### auth.controller.js
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `INVALID_CREDENTIALS` –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º email/–ø–∞—Ä–æ–ª–µ.

### middleware/auth.js
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥—ã –æ—à–∏–±–æ–∫ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Ç–æ–∫–µ–Ω–æ–º:
- `TOKEN_EXPIRED`
- `INVALID_TOKEN`  
- `NO_TOKEN`
- `INVALID_TOKEN_FORMAT`

## –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

### api.js (interceptor)
```javascript
if (errorCode === 'TOKEN_EXPIRED' || 
    errorCode === 'INVALID_TOKEN' || 
    errorCode === 'NO_TOKEN' || 
    errorCode === 'INVALID_TOKEN_FORMAT') {
  // –î–µ–ª–∞–µ–º logout –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç
  localStorage.removeItem('token');
  localStorage.removeItem('user');
  window.location.href = '/login';
}
// –ï—Å–ª–∏ INVALID_CREDENTIALS - –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—Ö–æ–¥
```javascript
// POST /login —Å –Ω–µ–≤–µ—Ä–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
{
  status: 401,
  data: {
    message: '–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ',
    code: 'INVALID_CREDENTIALS'
  }
}
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞
```

### ‚è∞ –ò—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω
```javascript
// GET /api/protected —Å –∏—Å—Ç–µ–∫—à–∏–º —Ç–æ–∫–µ–Ω–æ–º
{
  status: 401,
  data: {
    message: '–¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫',
    code: 'TOKEN_EXPIRED'
  }
}
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞**: –í–≤–µ–¥–∏—Ç–µ –Ω–µ–≤–µ—Ä–Ω—ã–π email/–ø–∞—Ä–æ–ª—å - –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è toast –±–µ–∑ redirect
2. **–ò—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω**: –ü–æ–¥–æ–∂–¥–∏—Ç–µ 24 —á–∞—Å–∞ –∏–ª–∏ —Å–±—Ä–æ—Å—å—Ç–µ —Ç–æ–∫–µ–Ω - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout
3. **Rate limit**: –°–¥–µ–ª–∞–π—Ç–µ 5+ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ - –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–µ—Ä, –±–µ–∑ logout

